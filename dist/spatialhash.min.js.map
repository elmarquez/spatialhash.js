{"version":3,"sources":["spatialhash.js"],"names":["SpatialHash","config","self","this","INDEXING_STRATEGY","BOUNDED","UNBOUNDED","cells","cellSize","conversionFactor","envelopes","indexingStrategy","max","min","objects","Object","keys","forEach","key","getPositionHash","width","prototype","clear","getBoundedHashKey","pos","Error","Math","floor","getCellsIntersectingAABB","aabb","size","i","j","k","points","x","ceil","y","z","push","getCellsIntersectingFrustum","frustum","intersects","cell","intersectsBox","getDistance","p1","p2","length","sqrt","pow","getEntitiesIntersectingFrustum","concat","getEntitiesIntersectingScreenRectangle","getPositionEnvelope","THREE","Vector3","Box3","getUnboundedHashKey","insert","id","index","metadata","position","reduce","vertex","hasOwnProperty","envelope","intersectsViewSelection","near","radius","limit","Infinity","setFromCenterAndSize","nearest","remove","indexOf","splice"],"mappings":";;AAAA,YAqBA,SAASA,aAAYC,QACnBA,OAASA,UACT,IAAIC,MAAOC,IAEXD,MAAKE,mBACHC,QAAS,oBACTC,UAAW,uBAGbJ,KAAKK,SACLL,KAAKM,SAAW,GAChBN,KAAKO,iBAAmB,GACxBP,KAAKQ,aACLR,KAAKS,iBAAmBT,KAAKE,kBAAkBE,UAC/CJ,KAAKU,IAAM,IACXV,KAAKW,IAAM,EACXX,KAAKY,WAELC,OAAOC,KAAKf,QAAQgB,QAAQ,SAAUC,KACpChB,KAAKgB,KAAOjB,OAAOiB,OAGrBhB,KAAKO,iBAAmB,EAAIP,KAAKM,SACjCN,KAAKiB,gBAAkBjB,KAAKA,KAAKS,kBACjCT,KAAKkB,OAASlB,KAAKU,IAAMV,KAAKW,KAAOX,KAAKM,SAM5CR,YAAYqB,UAAUC,MAAQ,WAC5BnB,KAAKI,SACLJ,KAAKW,YAUPd,YAAYqB,UAAUE,kBAAoB,SAAUC,KAClD,GAAIA,IAAI,GAAK,GAAKA,IAAI,GAAK,GAAKA,IAAI,GAAK,EACvC,KAAM,IAAIC,OAAM,yCACX,IAAID,IAAI,GAAKrB,KAAKS,KAAOY,IAAI,GAAKrB,KAAKS,KAAOY,IAAI,GAAKrB,KAAKS,IACjE,KAAM,IAAIa,OAAM,+BACX,IAAID,IAAI,GAAKrB,KAAKU,KAAOW,IAAI,GAAKrB,KAAKU,KAAOW,IAAI,GAAKrB,KAAKU,IACjE,KAAM,IAAIY,OAAM,4BAElB,OAAOC,MAAKC,MAAMH,IAAI,GAAKrB,KAAKM,kBAAoB,IAClDiB,KAAKC,MAAMH,IAAI,GAAKrB,KAAKM,kBAAoB,IAC7CiB,KAAKC,MAAMH,IAAI,GAAKrB,KAAKM,mBAS7BT,YAAYqB,UAAUO,yBAA2B,SAAUC,KAAMC,MAC/D,GAAIC,GAAGC,EAAGC,EAAGC,UACTtB,KACFuB,EAAGT,KAAKU,KAAKP,KAAKjB,IAAIuB,EAAEL,MAAQA,KAChCO,EAAGX,KAAKU,KAAKP,KAAKjB,IAAIyB,EAAEP,MAAQA,KAChCQ,EAAGZ,KAAKU,KAAKP,KAAKjB,IAAI0B,EAAER,MAAQA,MAE9BjB,KACFsB,EAAGT,KAAKC,MAAME,KAAKhB,IAAIsB,EAAEL,MAAQA,KACjCO,EAAGX,KAAKC,MAAME,KAAKhB,IAAIwB,EAAEP,MAAQA,KACjCQ,EAAGZ,KAAKC,MAAME,KAAKhB,IAAIyB,EAAER,MAAQA,KAEnC,KAAKC,EAAIlB,IAAIsB,EAAGJ,EAAInB,IAAIuB,EAAGJ,GAAKD,KAC9B,IAAKE,EAAInB,IAAIwB,EAAGL,EAAIpB,IAAIyB,EAAGL,GAAKF,KAC9B,IAAKG,EAAIpB,IAAIyB,EAAGL,EAAIrB,IAAI0B,EAAGL,GAAKH,KAC9BI,OAAOK,MAAMR,EAAEC,EAAEC,GAIvB,OAAOC,SAQTlC,YAAYqB,UAAUmB,4BAA8B,SAAUC,SAC5D,GAAIC,eAAiBxC,KAAOC,IAM5B,OALAY,QAAOC,KAAKd,KAAKQ,WAAWO,QAAQ,SAAU0B,MACxCF,QAAQG,cAAc1C,KAAKQ,UAAUiC,QACvCD,WAAWH,KAAKrC,KAAKK,MAAMoC,SAGxBD,YAST1C,YAAYqB,UAAUwB,YAAc,SAAUC,GAAIC,IAGhD,MAFAD,IAAG,GAAmB,IAAdA,GAAGE,OAAe,EAAIF,GAAG,GACjCC,GAAG,GAAmB,IAAdA,GAAGC,OAAe,EAAID,GAAG,GAC1BrB,KAAKuB,KACVvB,KAAKwB,IAAIH,GAAG,GAAKD,GAAG,GAAI,GACxBpB,KAAKwB,IAAIH,GAAG,GAAKD,GAAG,GAAI,GACxBpB,KAAKwB,IAAIH,GAAG,GAAKD,GAAG,GAAI,KAS5B9C,YAAYqB,UAAU8B,+BAAiC,SAAUV,SAC/D,GAAIC,eACAnC,MAAQJ,KAAKqC,4BAA4BC,QAI7C,OAHAlC,OAAMU,QAAQ,SAAU0B,MACtBD,WAAaA,WAAWU,OAAOT,QAE1BD,YAST1C,YAAYqB,UAAUgC,uCAAyC,SAAUP,GAAIC,IAC3E,GAAIL,cACJ,OAAOA,aAQT1C,YAAYqB,UAAUiC,oBAAsB,SAAU9B,KACpD,GAAIW,GAAIT,KAAKC,MAAMH,IAAI,GAAKrB,KAAKM,kBAAoBN,KAAKK,SACtD6B,EAAIX,KAAKC,MAAMH,IAAI,GAAKrB,KAAKM,kBAAoBN,KAAKK,SACtD8B,EAAIZ,KAAKC,MAAMH,IAAI,GAAKrB,KAAKM,kBAAoBN,KAAKK,SACtDK,IAAM,GAAI0C,OAAMC,QAAQrB,EAAGE,EAAGC,EAClCH,IAAKhC,KAAKK,SACV6B,GAAKlC,KAAKK,SACV8B,GAAKnC,KAAKK,QACV,IAAII,KAAM,GAAI2C,OAAMC,QAAQrB,EAAGE,EAAGC,EAClC,OAAO,IAAIiB,OAAME,KAAK5C,IAAKD,MAS7BZ,YAAYqB,UAAUqC,oBAAsB,SAAUlC,KACpD,MAAQE,MAAKC,MAAMH,IAAI,GAAKrB,KAAKM,kBAAoBN,KAAKK,SAAY,IACnEkB,KAAKC,MAAMH,IAAI,GAAKrB,KAAKM,kBAAoBN,KAAKK,SAAY,IAC9DkB,KAAKC,MAAMH,IAAI,GAAKrB,KAAKM,kBAAoBN,KAAKK,UAUvDR,YAAYqB,UAAUsC,OAAS,SAAUC,GAAIC,MAAOhC,KAAMiC,UAExD,GAAcC,UAAU7D,KAAOC,KAE3BI,MAAQL,KACT0B,yBAAyBC,KAAM1B,KAAKK,UACpCwD,OAAO,SAAUtB,WAAYuB,QAG5B,MAFAF,UAAW7D,KAAKiB,gBAAgB8C,QAChCvB,WAAWqB,UAAY7D,KAAKoD,oBAAoBW,QACzCvB,eAGX3B,QAAOC,KAAKT,OAAOU,QAAQ,SAAU0B,MAEnCzC,KAAKQ,UAAUiC,MAAQpC,MAAMoC,MAExBzC,KAAKK,MAAM2D,eAAevB,QAC7BzC,KAAKK,MAAMoC,UAEbzC,KAAKK,MAAMoC,MAAMJ,KAAKqB,IAEjB1D,KAAKY,QAAQoD,eAAeN,MAC/B1D,KAAKY,QAAQ8C,QAEf1D,KAAKY,QAAQ8C,IAAIrB,KAAKI,SAS1B3C,YAAYqB,UAAUqB,WAAa,SAAUb,MAC3C,GAAIa,eAAiBxC,KAAOC,IAM5B,OALAY,QAAOC,KAAKd,KAAKQ,WAAWO,QAAQ,SAAUkD,UACxCA,SAASvB,cAAcf,OACzBa,WAAWH,KAAK4B,YAGbzB,YAWT1C,YAAYqB,UAAU+C,wBAA0B,SAAU3B,QAASK,GAAIC,MAWvE/C,YAAYqB,UAAUgD,KAAO,SAAU7C,IAAK8C,OAAQC,OAClDA,MAAQA,OAASC,EAAAA,GACE,GAAIjB,OAAME,MAAOgB,qBAAqBjD,IAAK8C,SAahEtE,YAAYqB,UAAUqD,QAAU,SAAUlD,IAAK+C,SAS/CvE,YAAYqB,UAAUsD,OAAS,SAAUf,IACvC,GAAI7B,GAAG7B,KAAOC,IAEVA,MAAKW,QAAQoD,eAAeN,KAC9BzD,KAAKW,QAAQ8C,IAAI3C,QAAQ,SAAU0B,MACjCZ,EAAI7B,KAAKK,MAAMoC,MAAMiC,QAAQhB,IACzB7B,EAAI,IACN7B,KAAKK,MAAMoC,MAAMkC,OAAO9C,EAAE,WAKzB5B,MAAKO,UAAUkD,UACfzD,MAAKW,QAAQ8C","file":"spatialhash.min.js"}