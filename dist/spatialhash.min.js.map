{"version":3,"sources":["spatialhash.js"],"names":["SpatialHash","config","self","this","INDEXING_STRATEGY","BOUNDED","UNBOUNDED","cells","cellSize","conversionFactor","envelopes","indexingStrategy","max","min","objects","Object","keys","forEach","key","getPositionHash","width","prototype","clear","getBoundedHashKey","pos","Error","Math","floor","getCellsIntersectingAABB","aabb","size","i","j","k","points","x","ceil","y","z","push","getCellsIntersectingFrustum","frustum","intersects","cell","intersectsBox","getDistance","p1","p2","length","sqrt","pow","getEntitiesIntersectingFrustum","uuid","entities","reduce","id","split","hasOwnProperty","getEntitiesIntersectingScreenRectangle","getPositionEnvelope","THREE","Vector3","Box3","getUnboundedHashKey","getVerticesIntersectingFrustum","insert","index","metadata","position","vertex","envelope","intersectsViewSelection","near","radius","limit","Infinity","setFromCenterAndSize","nearest","remove","indexOf","splice"],"mappings":"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","file":"spatialhash.min.js"}