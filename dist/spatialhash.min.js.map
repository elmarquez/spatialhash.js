{"version":3,"sources":["spatialhash.js"],"names":["SpatialHash","config","self","this","INDEXING_STRATEGY","BOUNDED","UNBOUNDED","cells","cellSize","conversionFactor","envelopes","hashFn","indexingStrategy","max","min","objects","Object","keys","forEach","key","width","prototype","clear","getBoundedHashKey","pos","Error","Math","floor","getCellsIntersectingAABB","aabb","size","i","j","k","points","x","ceil","y","z","push","getCellsIntersectingFrustum","frustum","intersects","cell","intersectsBox","getDistance","p1","p2","length","sqrt","pow","getEntitiesIntersectingFrustum","getEntitiesIntersectingScreenRectangle","getUnboundedHashKey","insert","id","reduce","entries","p","THREE","Box3","hasOwnProperty","envelope","intersectsViewSelection","near","radius","limit","Infinity","setFromCenterAndSize","nearest","remove","indexOf","splice"],"mappings":"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","file":"spatialhash.min.js"}